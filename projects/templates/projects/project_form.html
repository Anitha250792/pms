{% extends 'base.html' %}
{% block title %} Create New Project{% endblock %}

{% block content %}
<style>
  body::after {
    background: linear-gradient(-45deg,
      rgba(66, 165, 245, 0.2),
      rgba(156, 39, 176, 0.2),
      rgba(38, 198, 218, 0.2),
      rgba(255, 193, 7, 0.2));
    background-size: 400% 400%;
    animation: gradientShift 10s ease infinite;
  }

  .project-card {
    backdrop-filter: blur(18px);
    background: rgba(255, 255, 255, 0.9);
    border-radius: 20px;
    box-shadow: 0 0 35px rgba(0, 0, 0, 0.2);
    padding: 2rem 2.5rem;
    max-width: 600px;
    margin: 60px auto;
    animation: fadeInUp 1s ease-out;
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .project-card label {
    font-weight: 600;
    color: #333;
  }

  .project-card input,
  .project-card select,
  .project-card textarea {
    border-radius: 10px;
    border: 1px solid #ccc;
    transition: all 0.3s ease;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  }

  .project-card input:focus,
  .project-card select:focus,
  .project-card textarea:focus {
    border-color: #42a5f5;
    box-shadow: 0 0 10px rgba(66, 165, 245, 0.4);
  }

  .btn-create {
    background: linear-gradient(45deg, #42a5f5, #26c6da);
    color: #fff;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    padding: 0.6rem 1.5rem;
    transition: all 0.3s ease;
  }

  .btn-create:hover {
    background: linear-gradient(45deg, #1e88e5, #00acc1);
    box-shadow: 0 0 20px rgba(38, 198, 218, 0.6);
    transform: scale(1.05);
  }

  .page-title {
    text-align: center;
    font-weight: 700;
    color: #1976d2;
    text-shadow: 0 0 8px rgba(25, 118, 210, 0.3);
    margin-bottom: 1.5rem;
  }

  .project-card:hover {
    transform: translateY(-5px);
  }

  /* ❗ Error styles */
  .errorlist {
    color: #d32f2f;
    margin-top: 5px;
    font-size: 0.9rem;
  }
</style>

<div class="container">
  <div class="project-card shadow-lg">
    <h2 class="page-title">Add New Project</h2>

    <!-- ✅ Add enctype and show errors -->
    <form method="POST" enctype="multipart/form-data" novalidate>
      {% csrf_token %}
      {{ form.non_field_errors }}

      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label" for="id_name">Project Name</label>
          {{ form.name }}
          {{ form.name.errors }}
        </div>

        {% if request.user.role == "Manager" %}
        <div class="col-md-6">
          <label class="form-label" for="id_assigned_to">Assign To</label>
          {{ form.assigned_to }}
          {{ form.assigned_to.errors }}
        </div>
        {% endif %}

        <div class="col-md-12">
          <label class="form-label" for="id_description">Description</label>
          {{ form.description }}
          {{ form.description.errors }}
        </div>

        <div class="col-md-6">
          <label class="form-label" for="id_assigned_date">Assigned Date</label>
          {{ form.assigned_date }}
          {{ form.assigned_date.errors }}
        </div>

        <div class="col-md-6">
          <label class="form-label" for="id_delivery_date">Delivery Date</label>
          {{ form.delivery_date }}
          {{ form.delivery_date.errors }}
        </div>

        <div class="col-md-6">
          <label class="form-label" for="id_status">Status</label>
          {{ form.status }}
          {{ form.status.errors }}
        </div>

        <div class="col-md-6">
          <label class="form-label" for="id_priority">Priority</label>
          {{ form.priority }}
          {{ form.priority.errors }}
        </div>
      </div>

      <div class="text-center mt-4">
        <button type="submit" class="btn btn-create px-4">
          <i class="bi bi-plus-circle me-1"></i> Project
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}
